<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resultados TOPSIS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üìä Resultados del An√°lisis TOPSIS</h1>

        <h3>2. Matriz ponderada</h3>
        <table>
            <thead>
                <tr>
                    <th>Alternativa</th>
                    {% for c in criterios %}<th>{{ c }}</th>{% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for i in range(alternativas|length) %}
                <tr>
                    <td><strong>{{ alternativas[i] }}</strong></td>
                    {% for j in range(criterios|length) %}
                        <td>{{ "%.4f"|format(matriz_pond[i][j]) }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <h3>3. Soluci√≥n ideal positiva (A‚Å∫)</h3>
        <ul>
            {% for j in range(criterios|length) %}
                <li><strong>{{ criterios[j] }}:</strong> {{ "%.4f"|format(ideal_pos[j]) }}</li>
            {% endfor %}
        </ul>

        <h3>4. Soluci√≥n ideal negativa (A‚Åª)</h3>
        <ul>
            {% for j in range(criterios|length) %}
                <li><strong>{{ criterios[j] }}:</strong> {{ "%.4f"|format(ideal_neg[j]) }}</li>
            {% endfor %}
        </ul>

        <h3>5. üèÜ Ranking final</h3>
        <table class="result-table">
            <thead>
                <tr>
                    <th>Ranking</th>
                    <th>Alternativa</th>
                    <th>Puntuaci√≥n</th>
                </tr>
            </thead>
            <tbody>
                {% for alt, score in resultados %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td><strong>{{ alt }}</strong></td>
                    <td>{{ score }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <hr style="margin: 40px 0;">

        <!-- FORMULARIO DE GUARDADO -->
        <div class="save-form">
            <h2>üíæ Guardar este an√°lisis</h2>
            <form method="POST" action="{{ url_for('routes.guardar_analisis_route') }}">
                
                <div class="form-row">
                    <label>Registro Acad√©mico:</label>
                    <input type="text" name="registro_academico" 
                           placeholder="Ej: 202030824" 
                           pattern="[0-9]{9}" 
                           title="Debe ser un n√∫mero de 9 d√≠gitos"
                           required>
                </div>

                <div class="form-row">
                    <label>Curso:</label>
                    <select name="curso" required>
                        <option value="">-- Selecciona un curso --</option>
                        <option value="Investigaci√≥n de Operaciones 1">Investigaci√≥n de Operaciones 1</option>
                        <option value="Investigaci√≥n de Operaciones 2">Investigaci√≥n de Operaciones 2</option>
                        <option value="An√°lisis de Decisiones">An√°lisis de Decisiones</option>
                        <option value="Gesti√≥n de Operaciones">Gesti√≥n de Operaciones</option>
                        <option value="M√©todos Cuantitativos">M√©todos Cuantitativos</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>

                <div class="form-row">
                    <label>Descripci√≥n del an√°lisis:</label>
                    <input type="text" name="descripcion" 
                           placeholder="Ej: Selecci√≥n de proveedor textil" 
                           maxlength="200"
                           required>
                </div>

                <div class="btn-container" style="margin-top: 20px;">
                    <button type="submit" class="btn">üíæ Guardar An√°lisis</button>
                    <a href="{{ url_for('routes.index') }}" class="btn" style="background: linear-gradient(135deg, #95a5a6, #7f8c8d);">
                        üîÑ Nuevo An√°lisis (sin guardar)
                    </a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>